{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport '@element-plus/icons-vue'; // ensure csrf-token append to post requests\n// https://www.freesion.com/article/8944598323/\n\naxios.interceptors.request.use(config => {\n  config.headers['X-Requested-With'] = 'XMLHttpRequest';\n  let regex = /.*csrftoken=([^;.]*).*$/; // 用于从cookie中匹配 csrftoken值\n\n  config.headers['X-CSRFToken'] = document.cookie.match(regex) === null ? null : document.cookie.match(regex)[1];\n  return config;\n});\nimport NaviBox from '@/components/NaviBox.vue';\nexport default {\n  components: {\n    NaviBox\n  },\n  name: 'PP1Search',\n\n  data() {\n    return {\n      title: '',\n      content: '',\n      formdata: new FormData()\n    };\n  },\n\n  methods: {\n    Post() {\n      if (this.title == \"\" || this.content == \"\") {\n        alert(\"Please check your input\");\n      } else {\n        console.log(this.formdata);\n        this.formdata.append(\"title\", this.title);\n        this.formdata.append(\"content\", this.content);\n        this.formdata.append(\"post_type\", \"Personal Development\");\n        axios.post('http://127.0.0.1:8000/json/post/', this.formdata, {\n          pic: this.formdata,\n          title: this.title,\n          content: this.content,\n          post_type: \"Personal Development\"\n        }).then(response => {\n          console.log(response.data);\n\n          if (response.data['status'] != 1) {\n            alert(response.data['message']);\n            this.$router.push('/');\n          } else {\n            alert(response.data['message']);\n            this.$router.push('/FirstPage');\n          }\n        });\n      }\n    },\n\n    handleelchange(file, fileList) {\n      console.log(\"123\");\n      console.log(file, fileList); //this.formdata = file.raw\n      //console.log(this.formdata)\n\n      this.formdata = new FormData();\n      fileList.map(item => {\n        //fileList本来就是数组，就不用转为真数组了\n        this.formdata.append(\"pic\", item.raw); //将每一个文件图片都加进formdata\n      });\n      console.log(this.formdata); // axios.post(\"接口地址\", formdata).then(res => { console.log(res) })\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}