{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\"; // ensure csrf-token append to post requests\n// https://www.freesion.com/article/8944598323/\n\naxios.interceptors.request.use(config => {\n  config.headers['X-Requested-With'] = 'XMLHttpRequest';\n  let regex = /.*csrftoken=([^;.]*).*$/; // 用于从cookie中匹配 csrftoken值\n\n  config.headers['X-CSRFToken'] = document.cookie.match(regex) === null ? null : document.cookie.match(regex)[1];\n  return config;\n});\nimport NaviBox from '@/components/NaviBox.vue';\nimport Contact from '@/components/Contact.vue';\nexport default {\n  name: 'InfoList',\n  components: {\n    NaviBox,\n    Contact\n  },\n\n  data() {\n    return {\n      friends: [],\n      name: friends[0],\n      param: new FormData()\n    };\n  },\n\n  mounted() {\n    this.showFriends();\n  },\n\n  methods: {\n    showFriends() {\n      axios.post('http://127.0.0.1:8000/json/showFriends/', {\n        name: ' '\n      }).then(response => {\n        console.log(response.data);\n\n        if (response.data['status'] != 1) {\n          alert('Sorry but you are not login');\n          this.$router.push('/');\n        } else {\n          this.friends = response.data['content'];\n        }\n      });\n    },\n\n    select(file, fileList) {\n      this.formdata = new FormData();\n      fileList.map(item => {\n        this.formdata.append(\"avatar\", item.raw);\n      });\n    },\n\n    update() {\n      axios.post('http://127.0.0.1:8000/json/changeAvatar/', param, {\n        avatar: this.formdata,\n        name: this.name\n      }).then(response => {\n        if (response.data['status'] == 0) {\n          alert('change success!');\n        } else {\n          alert('invalid!');\n        }\n      });\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}