{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport NaviBox from '@/components/NaviBox.vue';\nimport axios from \"axios\";\nimport AbstractDis2 from '@/components/AbstractDis2.vue'; // ensure csrf-token append to post requests\n// https://www.freesion.com/article/8944598323/\n\naxios.interceptors.request.use(config => {\n  config.headers['X-Requested-With'] = 'XMLHttpRequest';\n  let regex = /.*csrftoken=([^;.]*).*$/; // 用于从cookie中匹配 csrftoken值\n\n  config.headers['X-CSRFToken'] = document.cookie.match(regex) === null ? null : document.cookie.match(regex)[1];\n  return config;\n});\nexport default {\n  components: {\n    NaviBox,\n    AbstractDis2\n  },\n  name: 'PP2',\n\n  data() {\n    return {\n      bloglist: []\n    };\n  },\n\n  mounted() {\n    this.showBlogs(); // 监听页面滚动事件\n\n    window.addEventListener(\"scroll\", this.showSearch);\n  },\n\n  methods: {\n    showBlogs() {\n      axios.post('http://127.0.0.1:8000/json/showpost/').then(response => {\n        console.log(response.data);\n\n        if (response.data['status'] != 1) {\n          alert('Sorry but you are not login');\n          this.$router.push('/');\n        } else {\n          this.bloglist = response.data['content'];\n        }\n      });\n    }\n\n  }\n};","map":null,"metadata":{},"sourceType":"module"}