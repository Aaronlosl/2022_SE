{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '@/assets/分割线-2.svg';\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-82415838\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"InfoList\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"el-icon-upload el-icon--right\"\n}, null, -1));\n\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\n\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0\n}, null, -1));\n\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\n\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n\n  const _component_contact = _resolveComponent(\"contact\");\n\n  const _component_navi_box = _resolveComponent(\"navi-box\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_form_item, {\n    label: \"upload\",\n    prop: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_button, {\n      size: \"small\",\n      type: \"primary\",\n      onClick: _cache[0] || (_cache[0] = $event => $options.select())\n    }, {\n      default: _withCtx(() => [_createTextVNode(\"Upload Profile Photo\"), _hoisted_2]),\n      _: 1\n    }), _hoisted_3, _createElementVNode(\"input\", {\n      type: \"file\",\n      id: \"file\",\n      ref: \"upload\",\n      style: {\n        \"visibility\": \"hidden\"\n      },\n      onChange: _cache[1] || (_cache[1] = $event => $options.update($event)),\n      accept: \"image/*\"\n    }, null, 544)]),\n    _: 1\n  }), _hoisted_4, _hoisted_5, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.friends, friend => {\n    return _openBlock(), _createBlock(_component_contact, {\n      key: friend,\n      friend: friend\n    }, null, 8, [\"friend\"]);\n  }), 128)), _hoisted_6, _createVNode(_component_navi_box)]);\n}","map":{"version":3,"mappings":";OAYSA,gBAAwB;;;;;EAL1BC,KAAK,EAAC;;;gEAEsEC,oBAA6C,GAA7C,EAA6C;EAA1CD,KAAK,EAAC;AAAoC,CAA7C,EAAwC,IAAxC,EAAwC,EAAxC;;gEAAyDC,oBAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI,EAAJ;;gEAGxIA,oBAA8B,KAA9B,EAA8B;EAAzBC,GAAwB,EAAxBH;AAAyB,CAA9B,EAA6B,IAA7B,EAA6B,EAA7B;;gEAA8BE,oBAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI,EAAJ;;gEAE8CA,oBAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI,EAAJ;;;;;;;;;;;uBAP9EE,oBAWM,KAXN,cAWM,CAVJC,aAGeC,uBAHf,EAGe;IAHDC,KAAK,EAAC,QAGL;IAHcC,IAAI,EAAC;EAGnB,CAHf;sBACE,MAAsI,CAAtIH,aAAsII,oBAAtI,EAAsI;MAA3HC,IAAI,EAAC,OAAsH;MAA9GC,IAAI,EAAC,SAAyG;MAA9FC,OAAK,sCAAEC,iBAAF;IAAyF,CAAtI;wBAAyD,MAAoB,kBAApB,uBAAoB;;KAA7E,CAAsI,cACtIX,oBAA8G,OAA9G,EAA8G;MAAvGS,IAAI,EAAC,MAAkG;MAA3FG,EAAE,EAAC,MAAwF;MAAjFC,GAAG,EAAC,QAA6E;MAApEC,KAAyB,EAAzB;QAAA;MAAA,CAAoE;MAAzCC,QAAM,sCAAEJ,gBAAOK,MAAP,CAAF,CAAmC;MAAjBC,MAAM,EAAC;IAAU,CAA9G,YADsI;;GADxI,CAUI,EANJC,UAMI,EAN0BC,UAM1B,qBAJJjB,oBAA4EkB,SAA5E,EAA4E,IAA5E,EAA4EC,YAAlDC,aAAkD,EAA5DC,MAAiB,IAAX;yBAAtBC,aAA4EC,kBAA5E,EAA4E;MAAxCC,GAAG,EAAEH,MAAmC;MAA1BA,MAAM,EAAEA;IAAkB,CAA5E;GAA4E,CAA5E,MAII,GAJwEI,UAIxE,EADJxB,aAAqByB,mBAArB,CACI,CAXN","names":["_imports_0","class","_createElementVNode","src","_createElementBlock","_createVNode","_component_el_form_item","label","prop","_component_el_button","size","type","onClick","$options","id","ref","style","onChange","$event","accept","_hoisted_4","_hoisted_5","_Fragment","_renderList","$data","friend","_createBlock","_component_contact","key","_hoisted_6","_component_navi_box"],"sourceRoot":"","sources":["/Users/apple/Documents/2022_SE/xyapp/vue_with_route/src/views/InfoList.vue"],"sourcesContent":["<!-- 说明：好友列表页\n内容：\n默认置顶自己，可以修改个人信息\n添加的好友显示——至多100条 -->\n\n\n<template>\n  <div class=\"InfoList\">\n    <el-form-item label=\"upload\" prop=\"\">\n      <el-button size=\"small\" type=\"primary\" @click=\"select()\">Upload Profile Photo<i class=\"el-icon-upload el-icon--right\"></i></el-button><br>\n      <input type=\"file\" id=\"file\" ref=\"upload\" style=\"visibility:hidden\" @change=\"update($event)\" accept=\"image/*\">\n    </el-form-item>\n    <img src=\"@/assets/分割线-2.svg\"><br>\n\n    <contact v-for=\"friend in friends\" :key=\"friend\" :friend=\"friend\"></contact><br>\n\n\n    <navi-box></navi-box>\n  </div>\n</template>\n<script>\nimport axios from \"axios\"\n// ensure csrf-token append to post requests\n// https://www.freesion.com/article/8944598323/\naxios.interceptors.request.use((config) => {\n  config.headers['X-Requested-With'] = 'XMLHttpRequest';\n  let regex = /.*csrftoken=([^;.]*).*$/; // 用于从cookie中匹配 csrftoken值\n  config.headers['X-CSRFToken'] = document.cookie.match(regex) === null ? null : document.cookie.match(regex)[1];\n  return config\n});\n\nimport NaviBox from '@/components/NaviBox.vue'\nimport Contact from '@/components/Contact.vue'\nexport default {\n  name: 'InfoList',\n  components: { NaviBox, Contact, },\n  data() {\n    return {\n      friends: [],\n\n    }\n  },\n  mounted() {\n    this.showFriends()\n  },\n  methods: {\n    showFriends() {\n      axios.post('http://127.0.0.1:8000/json/showFriends/', { name: ' ' })\n        .then((response) => {\n          console.log(response.data)\n          if (response.data['status'] != 1) {\n            alert('Sorry but you are not login')\n            this.$router.push('/');\n          } else {\n            this.friends = response.data['content']\n          }\n        })\n    },\n    select() {\n      this.$refs.upload.click()\n    },\n    update(event) {\n      console.log(arguments)\n      const file = event.target.files[0]\n      let param = new FormData()\n      param.append('avatar', file)\n      console.log(param.get('file'))\n      axios.post('http://127.0.0.1:8000/json/changeAvatar/',  param, {name:this.friends[0] })\n        .then((response) => {\n          console.log(response.data)\n          console.log(this.$refs.file)\n          console.log(this.$refs.file.files[0])\n          if (response.data['status'] == 0) {\n            alert('change success!')\n          } else {\n            alert('invalid!')\n          }\n        })\n    },\n  },\n}\n</script>\n\n<style scoped>\nh3 {\n  margin: 450px 0px 60px;\n}\n\nul {\n  list-style-type: none;\n  padding: 0;\n}\n\na {\n  color: #000000;\n  margin: 32px;\n}\n\nb {\n  color: #000000;\n  margin: 8px;\n}\n\nbackBtn {\n  /* 箭头二 */\n  position: absolute;\n  left: 35px;\n  top: 25px;\n  width: 50px;\n  height: 50px;\n  transform: rotate(90);\n}\n\nmoreInfoBtn {\n  /* more-horizontal */\n  position: absolute;\n  left: 320px;\n  top: 25px;\n  width: 50px;\n  height: 50px;\n}\n\nheadPic {\n  /* 头像 */\n  position: absolute;\n  left: 40px;\n  top: 109px;\n  width: 120px;\n  height: 120px;\n  border-radius: 100px;\n}\n\naddFriend {\n  /* user-plus */\n  position: absolute;\n  left: 320px;\n  top: 144px;\n  width: 50px;\n  height: 50px;\n}\n\nname {\n  /* Name： */\n  position: absolute;\n  left: 49px;\n  top: 307px;\n  width: 78px;\n  height: 22px;\n  font-family: SourceHanSansCN-Regular;\n  font-size: 18px;\n  font-weight: normal;\n  letter-spacing: 0em;\n  color: #000000;\n  -webkit-text-stroke: #000000 1px;\n  /* 浏览器可能不支持 */\n}\n\nidentity {\n  /* Identity： */\n  position: absolute;\n  left: 49px;\n  top: 412px;\n  width: 78px;\n  height: 22px;\n  font-family: SourceHanSansCN-Regular;\n  font-size: 18px;\n  font-weight: normal;\n  letter-spacing: 0em;\n  color: #000000;\n  -webkit-text-stroke: #000000 1px;\n  /* 浏览器可能不支持 */\n}\n\ninfo {\n  /* Info： */\n  position: absolute;\n  left: 49px;\n  top: 513px;\n  width: 51px;\n  height: 22px;\n  font-family: SourceHanSansCN-Regular;\n  font-size: 18px;\n  font-weight: normal;\n  letter-spacing: 0em;\n  color: #000000;\n  -webkit-text-stroke: #000000 1px;\n  /* 浏览器可能不支持 */\n}\n\notherInfo {\n  /* Optional contact info： */\n  position: absolute;\n  left: 49px;\n  top: 618px;\n  width: 199px;\n  height: 22px;\n  font-family: SourceHanSansCN-Regular;\n  font-size: 18px;\n  font-weight: normal;\n  letter-spacing: 0em;\n  color: #000000;\n  -webkit-text-stroke: #000000 1px;\n  /* 浏览器可能不支持 */\n}\n</style>\n\n"]},"metadata":{},"sourceType":"module"}