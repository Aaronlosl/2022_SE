{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\"; // ensure csrf-token append to post requests\n// https://www.freesion.com/article/8944598323/\n\naxios.interceptors.request.use(config => {\n  config.headers['X-Requested-With'] = 'XMLHttpRequest';\n  let regex = /.*csrftoken=([^;.]*).*$/; // 用于从cookie中匹配 csrftoken值\n\n  config.headers['X-CSRFToken'] = document.cookie.match(regex) === null ? null : document.cookie.match(regex)[1];\n  return config;\n});\nimport NaviBox from '@/components/NaviBox.vue';\nexport default {\n  components: {\n    NaviBox\n  },\n  name: 'UpdateInfo',\n\n  data() {\n    return {\n      isFixed: false\n    };\n  },\n\n  methods: {\n    Post() {\n      if (this.name == \"\" || this.identity == \"\" || this.info == \"\" || this.optical_contact_info == \"\") {\n        alert(\"Please check your input\");\n      } else {\n        axios.post('http://127.0.0.1:8000/json/update_userinfo/', {\n          name: this.name,\n          identity: this.identity,\n          info: this.info,\n          optical_contact_info: this.optical_contact_info\n        }).then(response => {\n          console.log(response.data);\n\n          if (response.data['status'] != 1) {\n            alert(response.data['message']);\n            this.$router.push('/');\n          } else {\n            alert(response.data['message']);\n            this.$router.push('/InfoList');\n          }\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":";AA2CA,OAAOA,KAAP,MAAkB,OAAlB,C,CAEA;AACA;;AACAA,KAAK,CAACC,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAAgCC,MAAD,IAAY;EACzCA,MAAM,CAACC,OAAP,CAAe,kBAAf,IAAqC,gBAArC;EACA,IAAIC,KAAI,GAAI,yBAAZ,CAFyC,CAEF;;EACvCF,MAAM,CAACC,OAAP,CAAe,aAAf,IAAgCE,QAAQ,CAACC,MAAT,CAAgBC,KAAhB,CAAsBH,KAAtB,MAAiC,IAAjC,GAAwC,IAAxC,GAA+CC,QAAQ,CAACC,MAAT,CAAgBC,KAAhB,CAAsBH,KAAtB,EAA6B,CAA7B,CAA/E;EACA,OAAOF,MAAP;AACD,CALD;AAOA,OAAOM,OAAP,MAAoB,0BAApB;AACA,eAAe;EACbC,UAAU,EAAE;IAAED;EAAF,CADC;EAEbE,IAAI,EAAE,YAFO;;EAGbC,IAAI,GAAG;IACL,OAAO;MACLC,OAAO,EAAE;IADJ,CAAP;EAGD,CAPY;;EAQbC,OAAO,EAAE;IACPC,IAAI,GAAG;MACL,IAAI,KAAKJ,IAAL,IAAa,EAAb,IAAmB,KAAKK,QAAL,IAAiB,EAApC,IAA0C,KAAKC,IAAL,IAAa,EAAvD,IAA6D,KAAKC,oBAAL,IAA6B,EAA9F,EAAkG;QAChGC,KAAK,CAAC,yBAAD,CAAL;MACF,CAFA,MAEO;QACLpB,KAAK,CAACqB,IAAN,CAAW,6CAAX,EAA0D;UAAET,IAAI,EAAE,KAAKA,IAAb;UAAmBK,QAAQ,EAAE,KAAKA,QAAlC;UAA4CC,IAAI,EAAE,KAAKA,IAAvD;UAA6DC,oBAAoB,EAAC,KAAKA;QAAvF,CAA1D,EACGG,IADH,CACSC,QAAD,IAAc;UAClBC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACV,IAArB;;UACA,IAAIU,QAAQ,CAACV,IAAT,CAAc,QAAd,KAA2B,CAA/B,EAAkC;YAChCO,KAAK,CAACG,QAAQ,CAACV,IAAT,CAAc,SAAd,CAAD,CAAL;YACA,KAAKa,OAAL,CAAaC,IAAb,CAAkB,GAAlB;UACF,CAHA,MAGO;YACLP,KAAK,CAACG,QAAQ,CAACV,IAAT,CAAc,SAAd,CAAD,CAAL;YACA,KAAKa,OAAL,CAAaC,IAAb,CAAkB,WAAlB;UACF;QACD,CAVH;MAWF;IACD;;EAjBM;AARI,CAAf","names":["axios","interceptors","request","use","config","headers","regex","document","cookie","match","NaviBox","components","name","data","isFixed","methods","Post","identity","info","optical_contact_info","alert","post","then","response","console","log","$router","push"],"sourceRoot":"","sources":["/Users/hongjunwu/Desktop/Hw/2022_SE/xyapp/vue_with_route/src/views/UpdateInfo.vue"],"sourcesContent":["<!-- 说明：自己的个人信息更改界面\n内容：\n更改内容到后端——对接 -->\n\n<template>\n  <div class=\"home\">\n    <h1>\n      <img src=\"@/assets/logo.svg\">\n    </h1>\n    <h1>Update Infomation</h1>\n    <h2>\n      <p>\n        <t style=\"margin-right: 200px\">Name</t><br>\n        <textarea maxlength=\"25\" placeholder=\"less than 25 characters\" cols=\"32\" style=\"resize:none;\" v-model=\"name\"></textarea><br>\n      </p>\n      <p>\n        <t style=\"margin-right: 190px\">Identity</t><br>\n        <textarea maxlength=\"25\" placeholder=\"less than 25 characters\" cols=\"32\" style=\"resize:none;\" v-model=\"identity\"></textarea><br>\n      </p>\n      <p>\n        <t style=\"margin-right: 215px\">Info</t><br>\n        <textarea maxlength=\"50\" placeholder=\"less than 50 characters\" cols=\"32\" rows=\"4\"\n          style=\"resize:none;\" v-model=\"info\"></textarea><br>\n      </p>\n      <p>\n        <t style=\"margin-right: 125px\">Optional Contact</t><br>\n        <textarea maxlength=\"25\" placeholder=\"less than 25 characters\" cols=\"32\" style=\"resize:none;\" v-model=\"optical_contact_info\"></textarea><br>\n      </p>\n    </h2>\n\n      <el-button style=\"margin-left: 14%; \" @click=\"Post()\" type=\"text\">\n        <img src=\"@/assets/send.svg\">\n      </el-button>\n    <router-view></router-view>\n\n    <div class=\"scroll\" :class=\"{ 'is-fixed': isFixed }\">\n      <navi-box></navi-box>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\"\n\n// ensure csrf-token append to post requests\n// https://www.freesion.com/article/8944598323/\naxios.interceptors.request.use((config) => {\n  config.headers['X-Requested-With'] = 'XMLHttpRequest';\n  let regex = /.*csrftoken=([^;.]*).*$/; // 用于从cookie中匹配 csrftoken值\n  config.headers['X-CSRFToken'] = document.cookie.match(regex) === null ? null : document.cookie.match(regex)[1];\n  return config\n});\n\nimport NaviBox from '@/components/NaviBox.vue';\nexport default {\n  components: { NaviBox },\n  name: 'UpdateInfo',\n  data() {\n    return {\n      isFixed: false,\n    }\n  },\n  methods: {\n    Post() {\n      if (this.name == \"\" || this.identity == \"\" || this.info == \"\" || this.optical_contact_info == \"\") {\n        alert(\"Please check your input\")\n      } else {\n        axios.post('http://127.0.0.1:8000/json/update_userinfo/', { name: this.name, identity: this.identity, info: this.info, optical_contact_info:this.optical_contact_info })\n          .then((response) => {\n            console.log(response.data)\n            if (response.data['status'] != 1) {\n              alert(response.data['message'])\n              this.$router.push('/');\n            } else {\n              alert(response.data['message'])\n              this.$router.push('/InfoList');\n            }\n          })\n      }\n    },\n  }\n}\n</script>\n\n<style scoped>\nh2 {\n  font: 1em sans-serif;\n  margin: 0px 0px 60px;\n}\n\na {\n  color: #000000;\n  margin: 32px;\n}\n\nh3 {\n  margin: 0px 0px 60px;\n}\n\n.is-fixed {\n  position: fixed;\n  top: 2000;\n  z-index: 999;\n}\n\nb {\n  position: static;\n}\n\nbackBtn {\n  /* 箭头二 */\n  position: absolute;\n  left: -180px;\n  top: 25px;\n  width: 50px;\n  height: 50px;\n  transform: rotate(90);\n}\n\nmoreInfoBtn {\n  /* more-horizontal */\n  position: absolute;\n  left: 105px;\n  top: 25px;\n  width: 50px;\n  height: 50px;\n}\n\nheadPic {\n  /* 头像 */\n  position: absolute;\n  left: -175px;\n  top: 109px;\n  width: 120px;\n  height: 120px;\n  border-radius: 100px;\n}\n\naddFriend {\n  /* user-plus */\n  position: absolute;\n  left: 105px;\n  top: 144px;\n  width: 50px;\n  height: 50px;\n}\n\nname {\n  /* Name： */\n  position: absolute;\n  left: -166px;\n  top: 307px;\n  width: 78px;\n  height: 22px;\n  font-family: SourceHanSansCN-Regular;\n  font-size: 18px;\n  font-weight: normal;\n  letter-spacing: 0em;\n  color: #000000;\n  -webkit-text-stroke: #000000 1px;\n  /* 浏览器可能不支持 */\n}\n\nidentity {\n  /* Identity： */\n  position: absolute;\n  left: -166px;\n  top: 412px;\n  width: 78px;\n  height: 22px;\n  font-family: SourceHanSansCN-Regular;\n  font-size: 18px;\n  font-weight: normal;\n  letter-spacing: 0em;\n  color: #000000;\n  -webkit-text-stroke: #000000 1px;\n  /* 浏览器可能不支持 */\n}\n\ninfo {\n  /* Info： */\n  position: absolute;\n  left: -166px;\n  top: 513px;\n  width: 51px;\n  height: 22px;\n  font-family: SourceHanSansCN-Regular;\n  font-size: 18px;\n  font-weight: normal;\n  letter-spacing: 0em;\n  color: #000000;\n  -webkit-text-stroke: #000000 1px;\n  /* 浏览器可能不支持 */\n}\n\notherInfo {\n  /* Optional contact info： */\n  position: absolute;\n  left: -166px;\n  top: 618px;\n  width: 199px;\n  height: 22px;\n  font-family: SourceHanSansCN-Regular;\n  font-size: 18px;\n  font-weight: normal;\n  letter-spacing: 0em;\n  color: #000000;\n  -webkit-text-stroke: #000000 1px;\n  /* 浏览器可能不支持 */\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}