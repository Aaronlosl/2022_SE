{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\"; // ensure csrf-token append to post requests\n// https://www.freesion.com/article/8944598323/\n\naxios.interceptors.request.use(config => {\n  config.headers['X-Requested-With'] = 'XMLHttpRequest';\n  let regex = /.*csrftoken=([^;.]*).*$/; // 用于从cookie中匹配 csrftoken值\n\n  config.headers['X-CSRFToken'] = document.cookie.match(regex) === null ? null : document.cookie.match(regex)[1];\n  return config;\n});\nimport NaviBox from '@/components/NaviBox.vue';\nexport default {\n  components: {\n    NaviBox\n  },\n  name: 'UpdateInfo',\n\n  data() {\n    return {\n      isFixed: false\n    };\n  },\n\n  methods: {\n    Post() {\n      if (this.name == \"\" || this.identity == \"\" || this.info == \"\" || this.optical_contact_info == \"\") {\n        alert(\"Please check your input\");\n      } else {\n        axios.post('http://127.0.0.1:8000/json/update_userinfo/', {\n          name: this.name,\n          identity: this.identity,\n          info: this.info,\n          optical_contact_info: this.optical_contact_info\n        }).then(response => {\n          console.log(response.data);\n\n          if (response.data['status'] != 1) {\n            alert(response.data['message']);\n            this.$router.push('/');\n          } else {\n            alert(response.data['message']);\n            this.$router.push('/InfoList');\n          }\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":";AA2CA,OAAOA,KAAP,MAAkB,OAAlB,C,CAEA;AACA;;AACAA,KAAK,CAACC,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAAgCC,MAAD,IAAY;EACzCA,MAAM,CAACC,OAAP,CAAe,kBAAf,IAAqC,gBAArC;EACA,IAAIC,KAAI,GAAI,yBAAZ,CAFyC,CAEF;;EACvCF,MAAM,CAACC,OAAP,CAAe,aAAf,IAAgCE,QAAQ,CAACC,MAAT,CAAgBC,KAAhB,CAAsBH,KAAtB,MAAiC,IAAjC,GAAwC,IAAxC,GAA+CC,QAAQ,CAACC,MAAT,CAAgBC,KAAhB,CAAsBH,KAAtB,EAA6B,CAA7B,CAA/E;EACA,OAAOF,MAAP;AACD,CALD;AAOA,OAAOM,OAAP,MAAoB,0BAApB;AACA,eAAe;EACbC,UAAU,EAAE;IAAED;EAAF,CADC;EAEbE,IAAI,EAAE,YAFO;;EAGbC,IAAI,GAAG;IACL,OAAO;MACLC,OAAO,EAAE;IADJ,CAAP;EAGD,CAPY;;EAQbC,OAAO,EAAE;IACPC,IAAI,GAAG;MACL,IAAI,KAAKJ,IAAL,IAAa,EAAb,IAAmB,KAAKK,QAAL,IAAiB,EAApC,IAA0C,KAAKC,IAAL,IAAa,EAAvD,IAA6D,KAAKC,oBAAL,IAA6B,EAA9F,EAAkG;QAChGC,KAAK,CAAC,yBAAD,CAAL;MACF,CAFA,MAEO;QACLpB,KAAK,CAACqB,IAAN,CAAW,6CAAX,EAA0D;UAAET,IAAI,EAAE,KAAKA,IAAb;UAAmBK,QAAQ,EAAE,KAAKA,QAAlC;UAA4CC,IAAI,EAAE,KAAKA,IAAvD;UAA6DC,oBAAoB,EAAC,KAAKA;QAAvF,CAA1D,EACGG,IADH,CACSC,QAAD,IAAc;UAClBC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACV,IAArB;;UACA,IAAIU,QAAQ,CAACV,IAAT,CAAc,QAAd,KAA2B,CAA/B,EAAkC;YAChCO,KAAK,CAACG,QAAQ,CAACV,IAAT,CAAc,SAAd,CAAD,CAAL;YACA,KAAKa,OAAL,CAAaC,IAAb,CAAkB,GAAlB;UACF,CAHA,MAGO;YACLP,KAAK,CAACG,QAAQ,CAACV,IAAT,CAAc,SAAd,CAAD,CAAL;YACA,KAAKa,OAAL,CAAaC,IAAb,CAAkB,WAAlB;UACF;QACD,CAVH;MAWF;IACD;;EAjBM;AARI,CAAf","names":["axios","interceptors","request","use","config","headers","regex","document","cookie","match","NaviBox","components","name","data","isFixed","methods","Post","identity","info","optical_contact_info","alert","post","then","response","console","log","$router","push"],"sourceRoot":"","sources":["D:\\vue_dev\\2022_SE\\xyapp\\vue_with_route\\src\\views\\UpdateInfo.vue"],"sourcesContent":["<!-- 说明：自己的个人信息更改界面\r\n内容：\r\n更改内容到后端——对接 -->\r\n\r\n<template>\r\n  <div class=\"home\">\r\n    <h1>\r\n      <img src=\"@/assets/logo.svg\">\r\n    </h1>\r\n    <h1>Update Infomation</h1>\r\n    <h2>\r\n      <p>\r\n        <t style=\"margin-right: 200px\">Name</t><br>\r\n        <textarea maxlength=\"25\" placeholder=\"less than 25 characters\" cols=\"32\" style=\"resize:none;\" v-model=\"name\"></textarea><br>\r\n      </p>\r\n      <p>\r\n        <t style=\"margin-right: 190px\">Identity</t><br>\r\n        <textarea maxlength=\"25\" placeholder=\"less than 25 characters\" cols=\"32\" style=\"resize:none;\" v-model=\"identity\"></textarea><br>\r\n      </p>\r\n      <p>\r\n        <t style=\"margin-right: 215px\">Info</t><br>\r\n        <textarea maxlength=\"50\" placeholder=\"less than 50 characters\" cols=\"32\" rows=\"4\"\r\n          style=\"resize:none;\" v-model=\"info\"></textarea><br>\r\n      </p>\r\n      <p>\r\n        <t style=\"margin-right: 125px\">Optional Contact</t><br>\r\n        <textarea maxlength=\"25\" placeholder=\"less than 25 characters\" cols=\"32\" style=\"resize:none;\" v-model=\"optical_contact_info\"></textarea><br>\r\n      </p>\r\n    </h2>\r\n\r\n      <el-button style=\"margin-left: 14%; \" @click=\"Post()\" type=\"text\">\r\n        <img src=\"@/assets/send.svg\">\r\n      </el-button>\r\n    <router-view></router-view>\r\n\r\n    <div class=\"scroll\" :class=\"{ 'is-fixed': isFixed }\">\r\n      <navi-box></navi-box>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\"\r\n\r\n// ensure csrf-token append to post requests\r\n// https://www.freesion.com/article/8944598323/\r\naxios.interceptors.request.use((config) => {\r\n  config.headers['X-Requested-With'] = 'XMLHttpRequest';\r\n  let regex = /.*csrftoken=([^;.]*).*$/; // 用于从cookie中匹配 csrftoken值\r\n  config.headers['X-CSRFToken'] = document.cookie.match(regex) === null ? null : document.cookie.match(regex)[1];\r\n  return config\r\n});\r\n\r\nimport NaviBox from '@/components/NaviBox.vue';\r\nexport default {\r\n  components: { NaviBox },\r\n  name: 'UpdateInfo',\r\n  data() {\r\n    return {\r\n      isFixed: false,\r\n    }\r\n  },\r\n  methods: {\r\n    Post() {\r\n      if (this.name == \"\" || this.identity == \"\" || this.info == \"\" || this.optical_contact_info == \"\") {\r\n        alert(\"Please check your input\")\r\n      } else {\r\n        axios.post('http://127.0.0.1:8000/json/update_userinfo/', { name: this.name, identity: this.identity, info: this.info, optical_contact_info:this.optical_contact_info })\r\n          .then((response) => {\r\n            console.log(response.data)\r\n            if (response.data['status'] != 1) {\r\n              alert(response.data['message'])\r\n              this.$router.push('/');\r\n            } else {\r\n              alert(response.data['message'])\r\n              this.$router.push('/InfoList');\r\n            }\r\n          })\r\n      }\r\n    },\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nh2 {\r\n  font: 1em sans-serif;\r\n  margin: 0px 0px 60px;\r\n}\r\n\r\na {\r\n  color: #000000;\r\n  margin: 32px;\r\n}\r\n\r\nh3 {\r\n  margin: 0px 0px 60px;\r\n}\r\n\r\n.is-fixed {\r\n  position: fixed;\r\n  top: 2000;\r\n  z-index: 999;\r\n}\r\n\r\nb {\r\n  position: static;\r\n}\r\n\r\nbackBtn {\r\n  /* 箭头二 */\r\n  position: absolute;\r\n  left: -180px;\r\n  top: 25px;\r\n  width: 50px;\r\n  height: 50px;\r\n  transform: rotate(90);\r\n}\r\n\r\nmoreInfoBtn {\r\n  /* more-horizontal */\r\n  position: absolute;\r\n  left: 105px;\r\n  top: 25px;\r\n  width: 50px;\r\n  height: 50px;\r\n}\r\n\r\nheadPic {\r\n  /* 头像 */\r\n  position: absolute;\r\n  left: -175px;\r\n  top: 109px;\r\n  width: 120px;\r\n  height: 120px;\r\n  border-radius: 100px;\r\n}\r\n\r\naddFriend {\r\n  /* user-plus */\r\n  position: absolute;\r\n  left: 105px;\r\n  top: 144px;\r\n  width: 50px;\r\n  height: 50px;\r\n}\r\n\r\nname {\r\n  /* Name： */\r\n  position: absolute;\r\n  left: -166px;\r\n  top: 307px;\r\n  width: 78px;\r\n  height: 22px;\r\n  font-family: SourceHanSansCN-Regular;\r\n  font-size: 18px;\r\n  font-weight: normal;\r\n  letter-spacing: 0em;\r\n  color: #000000;\r\n  -webkit-text-stroke: #000000 1px;\r\n  /* 浏览器可能不支持 */\r\n}\r\n\r\nidentity {\r\n  /* Identity： */\r\n  position: absolute;\r\n  left: -166px;\r\n  top: 412px;\r\n  width: 78px;\r\n  height: 22px;\r\n  font-family: SourceHanSansCN-Regular;\r\n  font-size: 18px;\r\n  font-weight: normal;\r\n  letter-spacing: 0em;\r\n  color: #000000;\r\n  -webkit-text-stroke: #000000 1px;\r\n  /* 浏览器可能不支持 */\r\n}\r\n\r\ninfo {\r\n  /* Info： */\r\n  position: absolute;\r\n  left: -166px;\r\n  top: 513px;\r\n  width: 51px;\r\n  height: 22px;\r\n  font-family: SourceHanSansCN-Regular;\r\n  font-size: 18px;\r\n  font-weight: normal;\r\n  letter-spacing: 0em;\r\n  color: #000000;\r\n  -webkit-text-stroke: #000000 1px;\r\n  /* 浏览器可能不支持 */\r\n}\r\n\r\notherInfo {\r\n  /* Optional contact info： */\r\n  position: absolute;\r\n  left: -166px;\r\n  top: 618px;\r\n  width: 199px;\r\n  height: 22px;\r\n  font-family: SourceHanSansCN-Regular;\r\n  font-size: 18px;\r\n  font-weight: normal;\r\n  letter-spacing: 0em;\r\n  color: #000000;\r\n  -webkit-text-stroke: #000000 1px;\r\n  /* 浏览器可能不支持 */\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}