{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport '@element-plus/icons-vue'; // ensure csrf-token append to post requests\n// https://www.freesion.com/article/8944598323/\n\naxios.interceptors.request.use(config => {\n  config.headers['X-Requested-With'] = 'XMLHttpRequest';\n  let regex = /.*csrftoken=([^;.]*).*$/; // 用于从cookie中匹配 csrftoken值\n\n  config.headers['X-CSRFToken'] = document.cookie.match(regex) === null ? null : document.cookie.match(regex)[1];\n  return config;\n});\nimport NaviBox from '@/components/NaviBox.vue';\nexport default {\n  components: {\n    NaviBox\n  },\n  name: 'PP1Search',\n\n  data() {\n    return {\n      title: '',\n      content: ''\n    };\n  },\n\n  methods: {\n    Post() {\n      if (this.title == \"\" || this.content == \"\" || this.academy == \"\" || this.institution == \"\" || this.professor == \"\") {\n        alert(\"Please check your input\");\n      } else {\n        axios.post('http://127.0.0.1:8000/json/advpost/', {\n          title: this.title,\n          content: this.content,\n          academy: this.academy,\n          institution: this.institution,\n          professor: this.professor\n        }).then(response => {\n          console.log(response.data);\n\n          if (response.data['status'] != 1) {\n            alert(response.data['message']);\n            this.$router.push('/');\n          } else {\n            alert(response.data['message']);\n            this.$router.push('/FirstPage');\n          }\n        });\n      }\n    }\n\n  }\n  /*\n  mounted() {\n      this.showBlogs()\n      // 监听页面滚动事件\n      window.addEventListener(\"scroll\", this.showSearch)\n  },\n  */\n\n};","map":null,"metadata":{},"sourceType":"module"}